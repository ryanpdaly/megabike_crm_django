{% extends 'common/base.html' %}
{% load static %}

{% block title %}
	MegabikeCRM: Kundenrekla
{% endblock %}

{% block header %}
	<h1 class="h2 mb-0 text-gray-800">Kundenreklamation</h1>
	<a href="{% url 'warranty:new-ticket' %}" class="d-none d-sm-inline-block btn btn-primary shadow-sm"><i class="fas fa-download fa-sm text-white-50"></i> Rekla erstellen</a>
{% endblock %}

{% block content %}
	{% if reklaticket_list %}
	<div class='table-responsive'>
	    <table id="dataTable" class="table table-striped table-hover">
	      <thead>
	      	<tr>
	      	  <th scope="col">Ticket ID</th>
	      	  <th scope="col">Status</th>
	      	  <th scope="col">KdNr</th>
	      	  <th scope="col">Nachname</th>
	      	  <th scope="col">Hersteller</th>
	      	</tr>
	      </thead>
	      <tbody>
	      	{% for ticket in reklaticket_list %}
      		<tr>
      			<th scope="row"><a href="{% url 'warranty:display-ticket' pk=ticket.id %}">{{ ticket.id }}</a></th>
      			<td>{{ ticket.get_status_display }}
      			<td>{{ ticket.kunde.kundennummer }}</td>      				
      			<td>{{ ticket.kunde.nachname }}</td>
      			<td>{{ ticket.get_hersteller_display }}</td>
      		</tr>
	      	{% endfor %}
	      </tbody>
	    </table>
	</div>
	{% else %}
	  <p>Keine Reklamationen vorhanden.</p>
	{% endif %}
{% endblock %}

{% block javascript %}
	{{ block.super }}
	<link href="{% static 'vendor/datatables/dataTables.bootstrap4.min.css' %}" rel="stylesheet">
    <script src="{% static 'vendor/datatables/jquery.dataTables.min.js' %}"></script>
    <script src="{% static 'vendor/datatables/dataTables.bootstrap4.min.js' %}"></script>
    <script src="{% static 'js/datatables.js' %}"></script>
{% endblock %}